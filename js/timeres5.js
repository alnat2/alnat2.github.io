var countdown,secondsLeft,timers=[],timersPredefined=["15+5+15+9+15","15*3","15+10+15","15+11+15+10+15+8+15"],nextTimers=document.getElementById("nextTimers"),displayArea=document.getElementById("displayArea"),timerInput=document.getElementById("timerInput"),timerRunButton=document.getElementById("timerRun"),timerDisplay=document.querySelector(".displayTimeLeft"),timerTotalTime=document.querySelector(".displayTimeTotal"),soundComplete=document.getElementById("complete");function countdownOver(){soundComplete.play()}function secondsToTimeLeftString(a){var b=Math.floor(a/60),c=a%60,d="".concat(b,":").concat(10>c?"0":"").concat(c);return d}function displayTimeLeft(a){var b=secondsToTimeLeftString(a);document.title=b,timerDisplay.textContent=b}function displayTotalTime(a){if(1==a.length)return void(timerTotalTime.textContent="");var b=a.reduce(function(b,a){return parseInt(b)+parseInt(a)});timerTotalTime.textContent="total timers time is: ".concat(b," ").concat(1==b?"minute":"minutes")}function displayTimersPredefined(a){for(var b,c=document.createDocumentFragment(),d=0;d<a.length;d++)b=document.createElement("button"),b.className="display__time-predefined",b.innerHTML=a[d],c.appendChild(b);displayArea.appendChild(c)}function displayTimersPredefinedSelect(a){var b=document.createDocumentFragment(),c=document.createElement("select");c.setAttribute("id","predefinedSelect");for(var d,e=0;e<a.length;e++)d=document.createElement("option"),d.className="display__time-predefined",d.innerHTML=a[e],c.appendChild(d);b.appendChild(c),displayArea.appendChild(b)}function displayNextTimers(){if(nextTimers.hasChildNodes()&&(nextTimers.innerHTML=""),1==timers.length){var a=document.createElement("li");a.className="nextTimers__item",a.innerHTML="No more timers",nextTimers.appendChild(a)}else{for(var b=document.createDocumentFragment(),c=timers.length-2;0<=c;c--){var d=document.createElement("li"),e=document.createElement("button");e.className="startBtn",e.setAttribute("data-arrPos",c+1-timers.length),e.innerHTML=timers[c];var f=document.createElement("button");f.className="deleteBtn",f.setAttribute("data-arrPos",c-timers.length),f.innerHTML="delete",d.className="nextTimers__item",d.appendChild(e),d.appendChild(f),b.appendChild(d)}nextTimers.appendChild(b)}}function inputValidate(a){var b,c;b=a.value;var d=b.match(/[^\d\+\*\.]+/g);return null===d?(a.value="",b):void(displayArea.children[2].innerHTML="".concat(d.join(" ")," ").concat(c=1==d.length?"unacceptable symbol":"unacceptable symbols"))}function valuesToArray(a){a&&(a.split("+").forEach(function(a){if(a.includes("*")){var b=a.split("*"),c=1;if(3<=b.length)for(var d=1;d<b.length;d++)c*=parseInt(b[d]);else c=parseInt(b[1]);for(;c;)timers.push(b[0]),c--}else timers.push(a)}),timers.reverse())}function timer(a){clearInterval(countdown),displayNextTimers(),displayTotalTime(timers);var b=Date.now();displayTimeLeft(a),countdown=setInterval(function(){return secondsLeft=Math.round((b+1e3*a-Date.now())/1e3),0>secondsLeft?(countdownOver(),timers.pop(),clearInterval(countdown),void(0<timers.length?timer(60*timers[timers.length-1]):timerRunButton.textContent="\u25B6")):void displayTimeLeft(secondsLeft)},1e3)}function timerStart(a){timer(a),timerRunButton.textContent="\u23F8"}function timersRun(){if(timerInput.value){if(valuesToArray(inputValidate(timerInput)),void 0===timers||0==timers.length)return;timerStart(60*timers[timers.length-1])}else timerPauseResume()}function timerPauseResume(){countdown&&("\u23F8"===timerRunButton.textContent?(timerRunButton.textContent="\u25B6",clearInterval(countdown)):timerStart(secondsLeft))}if(3<timersPredefined.length){displayTimersPredefinedSelect(timersPredefined);var predefinedSelect=document.getElementById("predefinedSelect");predefinedSelect.addEventListener("click",function(a){valuesToArray(a.target.selectedOptions[0].innerHTML),timerStart(60*timers[timers.length-1])})}else displayTimersPredefined(timersPredefined),displayArea.addEventListener("click",function(a){"BUTTON"===a.target.tagName&&(valuesToArray(a.target.innerHTML),timerStart(60*timers[timers.length-1]))});timerRunButton.addEventListener("click",timersRun),timerInput.addEventListener("keypress",function(a){"Enter"===a.key&&(a.preventDefault(),timersRun())}),nextTimers.addEventListener("click",function(a){var b=a.target.dataset.arrpos;if("deleteBtn"===a.target.className)timers.splice(b,1),displayNextTimers(),displayTotalTime(timers);else if("startBtn"===a.target.className){timers.splice(b),timers.reverse();var c=timers.join("+");valuesToArray(c),timerStart(60*timers[timers.length-1])}});